/*! geoportal 12-04-2014 */

var console=console||{};!function(a,b,c){function d(c,d,e){var f=b.createElement(c);return d&&(f.id=_+d),e&&(f.style.cssText=e),a(f)}function e(){return c.innerHeight?c.innerHeight:a(c).height()}function f(a){var b=y.length,c=(Q+a)%b;return 0>c?b+c:c}function g(a,b){return Math.round((/%/.test(a)?("x"===b?z.width():e())/100:1)*parseInt(a,10))}function h(a,b){return a.photo||a.photoRegex.test(b)}function i(a,b){return a.retinaUrl&&c.devicePixelRatio>1?b.replace(a.photoRegex,a.retinaSuffix):b}function j(a){"contains"in r[0]&&!r[0].contains(a.target)&&(a.stopPropagation(),r.focus())}function k(){var b,c=a.data(P,$);null==c?(K=a.extend({},Z),console&&console.log&&console.log("Error: cboxElement missing settings object")):K=a.extend({},c);for(b in K)a.isFunction(K[b])&&"on"!==b.slice(0,2)&&(K[b]=K[b].call(P));K.rel=K.rel||P.rel||a(P).data("rel")||"nofollow",K.href=K.href||a(P).attr("href"),K.title=K.title||P.title,"string"==typeof K.href&&(K.href=a.trim(K.href))}function l(c,d){a(b).trigger(c),kb.trigger(c),a.isFunction(d)&&d.call(P)}function m(){var a,b,c,d,e,f=_+"Slideshow_",g="click."+_;K.slideshow&&y[1]?(b=function(){clearTimeout(a)},c=function(){(K.loop||y[Q+1])&&(a=setTimeout(W.next,K.slideshowSpeed))},d=function(){F.html(K.slideshowStop).unbind(g).one(g,e),kb.bind(db,c).bind(cb,b).bind(eb,e),r.removeClass(f+"off").addClass(f+"on")},e=function(){b(),kb.unbind(db,c).unbind(cb,b).unbind(eb,e),F.html(K.slideshowStart).unbind(g).one(g,function(){W.next(),d()}),r.removeClass(f+"on").addClass(f+"off")},K.slideshowAuto?d():e()):r.removeClass(f+"off "+f+"on")}function n(c){U||(P=c,k(),y=a(P),Q=0,"nofollow"!==K.rel&&(y=a("."+ab).filter(function(){var b,c=a.data(this,$);return c&&(b=a(this).data("rel")||c.rel||this.rel),b===K.rel}),Q=y.index(P),-1===Q&&(y=y.add(P),Q=y.length-1)),q.css({opacity:parseFloat(K.opacity),cursor:K.overlayClose?"pointer":"auto",visibility:"visible"}).show(),S||(S=T=!0,r.css({visibility:"hidden",display:"block"}),A=d(lb,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(t),L=u.height()+x.height()+t.outerHeight(!0)-t.height(),M=v.width()+w.width()+t.outerWidth(!0)-t.width(),N=A.outerHeight(!0),O=A.outerWidth(!0),K.w=g(K.initialWidth,"x"),K.h=g(K.initialHeight,"y"),W.position(),ib&&z.bind("resize."+jb+" scroll."+jb,function(){q.css({width:z.width(),height:e(),top:z.scrollTop(),left:z.scrollLeft()})}).trigger("resize."+jb),m(),l(bb,K.onOpen),J.add(D).hide(),I.html(K.close).show(),r.focus(),b.addEventListener&&(b.addEventListener("focus",j,!0),kb.one(fb,function(){b.removeEventListener("focus",j,!0)})),K.returnFocus&&kb.one(fb,function(){a(P).focus()})),W.load(!0))}function o(){!r&&b.body&&(Y=!1,z=a(c),r=d(lb).attr({id:$,"class":hb?_+(ib?"IE6":"IE"):"",role:"dialog",tabindex:"-1"}).hide(),q=d(lb,"Overlay",ib?"position:absolute":"").hide(),C=d(lb,"LoadingOverlay").add(d(lb,"LoadingGraphic")),s=d(lb,"Wrapper"),t=d(lb,"Content").append(D=d(lb,"Title"),E=d(lb,"Current"),H=d("button","Previous"),G=d("button","Next"),F=d("button","Slideshow"),C,I=d("button","Close")),s.append(d(lb).append(d(lb,"TopLeft"),u=d(lb,"TopCenter"),d(lb,"TopRight")),d(lb,!1,"clear:left").append(v=d(lb,"MiddleLeft"),t,w=d(lb,"MiddleRight")),d(lb,!1,"clear:left").append(d(lb,"BottomLeft"),x=d(lb,"BottomCenter"),d(lb,"BottomRight"))).find("div div").css({"float":"left"}),B=d(lb,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),J=G.add(H).add(E).add(F),a(b.body).append(q,r.append(s,B)))}function p(){function c(a){a.which>1||a.shiftKey||a.altKey||a.metaKey||(a.preventDefault(),n(this))}return r?(Y||(Y=!0,G.click(function(){W.next()}),H.click(function(){W.prev()}),I.click(function(){W.close()}),q.click(function(){K.overlayClose&&W.close()}),a(b).bind("keydown."+_,function(a){var b=a.keyCode;S&&K.escKey&&27===b&&(a.preventDefault(),W.close()),S&&K.arrowKey&&y[1]&&!a.altKey&&(37===b?(a.preventDefault(),H.click()):39===b&&(a.preventDefault(),G.click()))}),a.isFunction(a.fn.on)?a(b).on("click."+_,"."+ab,c):a("."+ab).live("click."+_,c)),!0):!1}var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},$="colorbox",_="cbox",ab=_+"Element",bb=_+"_open",cb=_+"_load",db=_+"_complete",eb=_+"_cleanup",fb=_+"_closed",gb=_+"_purge",hb=!a.support.leadingWhitespace,ib=hb&&!c.XMLHttpRequest,jb=_+"_IE6",kb=a({}),lb="div",mb=0;a.colorbox||(a(o),W=a.fn[$]=a[$]=function(b,c){var d=this;if(b=b||{},o(),p()){if(a.isFunction(d))d=a("<a/>"),b.open=!0;else if(!d[0])return d;c&&(b.onComplete=c),d.each(function(){a.data(this,$,a.extend({},a.data(this,$)||Z,b))}).addClass(ab),(a.isFunction(b.open)&&b.open.call(d)||b.open)&&n(d[0])}return d},W.position=function(a,b){function c(a){u[0].style.width=x[0].style.width=t[0].style.width=parseInt(a.style.width,10)-M+"px",t[0].style.height=v[0].style.height=w[0].style.height=parseInt(a.style.height,10)-L+"px"}var d,f,h,i=0,j=0,k=r.offset();z.unbind("resize."+_),r.css({top:-9e4,left:-9e4}),f=z.scrollTop(),h=z.scrollLeft(),K.fixed&&!ib?(k.top-=f,k.left-=h,r.css({position:"fixed"})):(i=f,j=h,r.css({position:"absolute"})),j+=K.right!==!1?Math.max(z.width()-K.w-O-M-g(K.right,"x"),0):K.left!==!1?g(K.left,"x"):Math.round(Math.max(z.width()-K.w-O-M,0)/2),i+=K.bottom!==!1?Math.max(e()-K.h-N-L-g(K.bottom,"y"),0):K.top!==!1?g(K.top,"y"):Math.round(Math.max(e()-K.h-N-L,0)/2),r.css({top:k.top,left:k.left,visibility:"visible"}),a=r.width()===K.w+O&&r.height()===K.h+N?0:a||0,s[0].style.width=s[0].style.height="9999px",d={width:K.w+O+M,height:K.h+N+L,top:i,left:j},0===a&&r.css(d),r.dequeue().animate(d,{duration:a,complete:function(){c(this),T=!1,s[0].style.width=K.w+O+M+"px",s[0].style.height=K.h+N+L+"px",K.reposition&&setTimeout(function(){z.bind("resize."+_,W.position)},1),b&&b()},step:function(){c(this)}})},W.resize=function(a){S&&(a=a||{},a.width&&(K.w=g(a.width,"x")-O-M),a.innerWidth&&(K.w=g(a.innerWidth,"x")),A.css({width:K.w}),a.height&&(K.h=g(a.height,"y")-N-L),a.innerHeight&&(K.h=g(a.innerHeight,"y")),a.innerHeight||a.height||(A.css({height:"auto"}),K.h=A.height()),A.css({height:K.h}),W.position("none"===K.transition?0:K.speed))},W.prep=function(b){function c(){return K.w=K.w||A.width(),K.w=K.mw&&K.mw<K.w?K.mw:K.w,K.w}function e(){return K.h=K.h||A.height(),K.h=K.mh&&K.mh<K.h?K.mh:K.h,K.h}if(S){var g,j="none"===K.transition?0:K.speed;A.empty().remove(),A=d(lb,"LoadedContent").append(b),A.hide().appendTo(B.show()).css({width:c(),overflow:K.scrolling?"auto":"hidden"}).css({height:e()}).prependTo(t),B.hide(),a(R).css({"float":"none"}),g=function(){function b(){hb&&r[0].style.removeAttribute("filter")}var c,e,g=y.length,k="frameBorder",m="allowTransparency";S&&(e=function(){clearTimeout(V),C.hide(),l(db,K.onComplete)},hb&&R&&A.fadeIn(100),D.html(K.title).add(A).show(),g>1?("string"==typeof K.current&&E.html(K.current.replace("{current}",Q+1).replace("{total}",g)).show(),G[K.loop||g-1>Q?"show":"hide"]().html(K.next),H[K.loop||Q?"show":"hide"]().html(K.previous),K.slideshow&&F.show(),K.preloading&&a.each([f(-1),f(1)],function(){var b,c,d=y[this],e=a.data(d,$);e&&e.href?(b=e.href,a.isFunction(b)&&(b=b.call(d))):b=a(d).attr("href"),b&&h(e,b)&&(b=i(e,b),c=new Image,c.src=b)})):J.hide(),K.iframe?(c=d("iframe")[0],k in c&&(c[k]=0),m in c&&(c[m]="true"),K.scrolling||(c.scrolling="no"),a(c).attr({src:K.href,name:(new Date).getTime(),"class":_+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",e).appendTo(A),kb.one(gb,function(){c.src="//about:blank"}),K.fastIframe&&a(c).trigger("load")):e(),"fade"===K.transition?r.fadeTo(j,1,b):b())},"fade"===K.transition?r.fadeTo(j,0,function(){W.position(0,g)}):W.position(j,g)}},W.load=function(b){var e,f,j,m=W.prep,n=++mb;T=!0,R=!1,P=y[Q],b||k(),X&&r.add(q).removeClass(X),K.className&&r.add(q).addClass(K.className),X=K.className,l(gb),l(cb,K.onLoad),K.h=K.height?g(K.height,"y")-N-L:K.innerHeight&&g(K.innerHeight,"y"),K.w=K.width?g(K.width,"x")-O-M:K.innerWidth&&g(K.innerWidth,"x"),K.mw=K.w,K.mh=K.h,K.maxWidth&&(K.mw=g(K.maxWidth,"x")-O-M,K.mw=K.w&&K.w<K.mw?K.w:K.mw),K.maxHeight&&(K.mh=g(K.maxHeight,"y")-N-L,K.mh=K.h&&K.h<K.mh?K.h:K.mh),e=K.href,V=setTimeout(function(){C.show()},100),K.inline?(j=d(lb).hide().insertBefore(a(e)[0]),kb.one(gb,function(){j.replaceWith(A.children())}),m(a(e))):K.iframe?m(" "):K.html?m(K.html):h(K,e)?(e=i(K,e),a(R=new Image).addClass(_+"Photo").bind("error",function(){K.title=!1,m(d(lb,"Error").html(K.imgError))}).one("load",function(){var a;n===mb&&(K.retinaImage&&c.devicePixelRatio>1&&(R.height=R.height/c.devicePixelRatio,R.width=R.width/c.devicePixelRatio),K.scalePhotos&&(f=function(){R.height-=R.height*a,R.width-=R.width*a},K.mw&&R.width>K.mw&&(a=(R.width-K.mw)/R.width,f()),K.mh&&R.height>K.mh&&(a=(R.height-K.mh)/R.height,f())),K.h&&(R.style.marginTop=Math.max(K.mh-R.height,0)/2+"px"),y[1]&&(K.loop||y[Q+1])&&(R.style.cursor="pointer",R.onclick=function(){W.next()}),hb&&(R.style.msInterpolationMode="bicubic"),setTimeout(function(){m(R)},1))}),setTimeout(function(){R.src=e},1)):e&&B.load(e,K.data,function(b,c){n===mb&&m("error"===c?d(lb,"Error").html(K.xhrError):a(this).contents())})},W.next=function(){!T&&y[1]&&(K.loop||y[Q+1])&&(Q=f(1),W.load())},W.prev=function(){!T&&y[1]&&(K.loop||Q)&&(Q=f(-1),W.load())},W.close=function(){S&&!U&&(U=!0,S=!1,l(eb,K.onCleanup),z.unbind("."+_+" ."+jb),q.fadeTo(200,0),r.stop().fadeTo(300,0,function(){r.add(q).css({opacity:1,cursor:"auto"}).hide(),l(gb),A.empty().remove(),setTimeout(function(){U=!1,l(fb,K.onClosed)},1)}))},W.remove=function(){a([]).add(r).add(q).remove(),r=null,a("."+ab).removeData($).removeClass(ab),a(b).unbind("click."+_)},W.element=function(){return a(P)},W.settings=Z)}(jQuery,document,window);var OpenLayers=OpenLayers||{},console=console||{},geoportal=function(){"use strict";var a,b=new OpenLayers.LonLat(-8739214.39812,4584593.40392),c=new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34);OpenLayers.IMAGE_RELOAD_ATTEMPTS=3,OpenLayers.Util.onImageLoadErrorColor="transparent",OpenLayers.ImgPath="http://js.mapbox.com/theme/dark/";var d=[new OpenLayers.Control.Attribution,new OpenLayers.Control.PanZoomBar,new OpenLayers.Control.ScaleLine,new OpenLayers.Control.MousePosition,new OpenLayers.Control.Navigation];return{searchMap:function(e){var f=new OpenLayers.Layer.Boxes("Bbox marker"),g=new OpenLayers.Control,h=new OpenLayers.Projection("EPSG:4326"),i=new OpenLayers.Projection("EPSG:900913");return a=new OpenLayers.Map({div:e,projection:i,displayProjection:h,units:"m",maxResolution:"auto",maxExtent:c,controls:d,layers:[new OpenLayers.Layer.OSM("osm")]}),OpenLayers.Util.extend(g,{draw:function(){this.box=new OpenLayers.Handler.Box(g,{done:this.notice},{keyMask:OpenLayers.Handler.MOD_NONE}),this.box.activate()},notice:function(b){f.clearMarkers();var c=a.getLonLatFromPixel(new OpenLayers.Pixel(b.left,b.bottom)),d=a.getLonLatFromPixel(new OpenLayers.Pixel(b.right,b.top)),e=c.clone(),g=d.clone();e.transform(a.getProjectionObject(),h),g.transform(a.getProjectionObject(),h),$("#ll-lon").val(e.lon.toFixed(4)),$("#ll-lat").val(e.lat.toFixed(4)),$("#ur-lon").val(g.lon.toFixed(4)),$("#ur-lat").val(g.lat.toFixed(4)),b=new OpenLayers.Bounds(c.lon,c.lat,d.lon,d.lat);var i=new OpenLayers.Marker.Box(b);f.addMarker(i)}}),a.addControl(g),a.addLayer(f),a.setCenter(b,3),a},itemMap:function(b){a=new OpenLayers.Map(b,{})}}}();!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}();var console=console||{};$(document).ready(function(){$(".iframe").colorbox({iframe:!0,width:"80%",height:"80%"}),$(".image").colorbox({rel:"map_layers",width:"90%",height:"90%",iframe:!0})});var console=console||{};$(document).ready(function(){$("#more-link").click(function(){return $(this).html('<img src="/images/loading.gif"/>'),$.get($(this).attr("href"),function(a){var b=$(a).find(".result");$("#results").append(b)}),$(document).ajaxComplete(function(){$(this).html("View more results")}),$(this).attr("href",function(){var a=$(this).attr("href").split(/s=(\d+)/);return parseInt(a[1],10)<parseInt($("#hits").text(),10)?(a[1]="s="+(parseInt(a[1],10)+25),console.log(a)):$(this).hide(),a.join("")}),!1})});
//# sourceMappingURL=geoportal.min.map